<!DOCTYPE html>
<html>
<head>
  <title>Layouts &raquo; Hero Sidebar</title>
  <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' />
  <link rel="stylesheet" type="text/css" href="../assets/lib/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" type="text/css" href="../assets/css/keen-dashboards.css" />
</head>
<body class="application">

  <div class="navbar navbar-inverse navbar-fixed-top" role="navigation">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../">
          <span class="glyphicon glyphicon-chevron-left"></span>
        </a>
        <a class="navbar-brand" href="./">Layouts &raquo; Hero Sidebar</a>
      </div>
      <div class="navbar-collapse collapse">
        <ul class="nav navbar-nav navbar-left">
          <li><a href="https://keen.io">Home</a></li>
          <li><a href="https://keen.io/team">Team</a></li>
          <li><a href="https://github.com/keenlabs/dashboards/tree/gh-pages/layouts/hero-sidebar">Source</a></li>
          <li><a href="https://groups.google.com/forum/#!forum/keen-io-devs">Community</a></li><li><a href="http://stackoverflow.com/questions/tagged/keen-io?sort=newest&pageSize=15">Technical Support</a></li>
        </ul>
      </div>
    </div>
  </div>

  <div class="container-fluid">

    <div class="row">
      <div class="col-sm-3">
        <div class="chart-wrapper">
          <div class="chart-title">
            Cell Title
          </div>
          <div class="chart-stage">
            <div class="this"></div>
          </div>
          <div class="chart-notes">
            Notes about this chart
          </div>
        </div>
      </div>
      <div class="col-sm-9">
        <div class="row">
          <div class="col-sm-12">
            <div class="chart-wrapper">
              <div class="chart-title">
                Cell Title
              </div>
              <div class="chart-stage">
                <img data-src="holder.js/100%x240/white">
              </div>
              <div class="chart-notes">
                Notes about this chart
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <div class="chart-wrapper">
              <div class="chart-title">
                Cell Title
              </div>
              <div class="chart-stage">
                <img data-src="holder.js/100%x120/white">
              </div>
              <div class="chart-notes">
                Notes about this chart
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="chart-wrapper">
              <div class="chart-title">
                Cell Title
              </div>
              <div class="chart-stage">
                <img data-src="holder.js/100%x120/white">
              </div>
              <div class="chart-notes">
                Notes about this chart
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="chart-wrapper">
              <div class="chart-title">
                Cell Title
              </div>
              <div class="chart-stage">
                <img data-src="holder.js/100%x120/white">
              </div>
              <div class="chart-notes">
                Notes about this chart
              </div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col-sm-4">
            <div class="chart-wrapper">
              <div class="chart-title">
                Cell Title
              </div>
              <div class="chart-stage">
                <img data-src="holder.js/100%x120/white">
              </div>
              <div class="chart-notes">
                Notes about this chart
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="chart-wrapper">
              <div class="chart-title">
                Cell Title
              </div>
              <div class="chart-stage">
                <img data-src="holder.js/100%x120/white">
              </div>
              <div class="chart-notes">
                Notes about this chart
              </div>
            </div>
          </div>
          <div class="col-sm-4">
            <div class="chart-wrapper">
              <div class="chart-title">
                Cell Title
              </div>
              <div class="chart-stage">
                <img data-src="holder.js/100%x120/white">
              </div>
              <div class="chart-notes">
                Notes about this chart
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>



    <hr>

    <p class="small text-muted">Built with &#9829; by <a href="https://keen.io">Keen IO</a></p>

  </div>

  <script type="text/javascript" src="../../assets/lib/jquery/dist/jquery.min.js"></script>
  <script type="text/javascript" src="../../assets/lib/bootstrap/dist/js/bootstrap.min.js"></script>

  <script type="text/javascript" src="../../assets/lib/holderjs/holder.js"></script>
  <script>
    Holder.add_theme("white", { background:"#fff", foreground:"#a7a7a7", size:10 });
  </script>

  <script type="text/javascript" src="../../assets/lib/keen-js/dist/keen.min.js"></script>
  <script type="text/javascript" src="../../assets/js/meta.js"></script>

     <script src="https://www.gstatic.com/firebasejs/3.7.1/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.7.3/firebase.js"></script>
        <script>
        // Initialize Firebase
     
        
        </script>
        <script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-auth.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-database.js"></script>
        <script src="https://www.gstatic.com/firebasejs/3.7.1/firebase-messaging.js"></script>
        <script src="../vendor/Chart.bundle.js"></script>
        <script src="//cdn.jsdelivr.net/ramda/0.23/ramda.min.js"></script>
        <script src="https://code.highcharts.com/highcharts.js"></script>
        <script src="https://code.highcharts.com/highcharts-more.js"></script>
        <script src="https://code.highcharts.com/modules/solid-gauge.js"></script>
        <script src="../vendor/tabletop.js"></script>
        <script src="../vendor/papa.js"></script>
        <script src="../dash.js"></script>
        
        <script>
           // var app = Elm.Dash.embed(document.getElementById("dash"));      
           
            

        </script>
        <script>
            function newGage (patta, households, node){
              var gaugeOptions = {

                chart: {
                    type: 'solidgauge'
                },

                title: null,

                pane: {
                    center: ['50%', '85%'],
                    size: '140%',
                    startAngle: -90,
                    endAngle: 90,
                    background: {
                        backgroundColor: '#EEE',
                        innerRadius: '60%',
                        outerRadius: '100%',
                        shape: 'arc'
                    }
                },

                tooltip: {
                    enabled: false
                },

                // the value axis
                yAxis: {
                    stops: [
                        [0.1, '#55BF3B'], // green
                        [0.5, '#DDDF0D'], // yellow
                        [0.9, '#DF5353'] // red
                    ],
                    lineWidth: 0,
                    minorTickInterval: null,
                    tickAmount: 2,
                    title: {
                        y: -70
                    },
                    labels: {
                        y: 16
                    }
                },

                plotOptions: {
                    solidgauge: {
                        dataLabels: {
                            y: 5,
                            borderWidth: 0,
                            useHTML: true
                        }
                    }
                }
            };
                  var chartSpeed = Highcharts.chart(node, Highcharts.merge(gaugeOptions, {
                    yAxis: {
                        min: 0,
                        max: households,
                        title: {
                            text: "title"
                        }
                    },

                    credits: {
                        enabled: false
                    },

                    series: [{
                        name: 'Speed',
                        data: [patta],                       
                        tooltip: {
                            valueSuffix: ' km/h'
                        }
                    }]

                }));

                return chartSpeed
            }
        function setColor(max, value){
                if (max == 0 || value / max < .5){
                    return "#ff0000"
                }
                else if (value > max){
                    return "#0000ff"
                }
                else{
                    return "#010101"
                }
            }
        </script>

        <script>
            var alpha;
         window.onload = function() { };
                var config = {
                    apiKey: "AIzaSyD_UYUYEG2DIfdw18YTrMsda0GhImCsMN4",
                    authDomain: "odisha-dash.firebaseapp.com",
                    databaseURL: "https://odisha-dash.firebaseio.com",
                    storageBucket: "odisha-dash.appspot.com",
                    messagingSenderId: "534292583836"
                };
                firebase.initializeApp(config);

                
                var starCountRef = firebase.database().ref('landesa/odisha/bhubaneswar/homestead' );
                    starCountRef.on('value', function(snapshot) {
                        updateStarCount(snapshot.val());
                    }
                );

                var updateStarCount = function(value){
                    //console.log(value);
                    showInfo(value);
                   // console.log('ok');
                }

            

            function showInfo(data) {
              
                var take_patta = x => x.pattas|| 0;
                var take_households = x => x.households;
                var households = take_households(data) 
                console.log(households)
                var patta = take_patta(data) 
                console.log(patta)

                var data = {
                    labels: ["Gumma"],
                    datasets: [
                        { 
                        label: "patta distributed" ,
                        backgroundColor: "#36a2eb",
                        stack: "stack 1",
                        data: [patta],
                      //  stack: "stack 1"
                    },{
                        label: "households identified" ,
                        stack: "stack 0",
                        backgroundColor: "#ff6384",
                        data: [households],
                       
                    }

                    
                    
                    ]
                    
                }
                var node = document.getElementById("this")
                alpha = newGage(patta, households, node);
                console.log('ok')

               
            }
            
            

        </script>

</body>
</html>
